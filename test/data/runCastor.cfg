process CastorTest  = {
        service = MessageLogger
        { 
	        untracked vstring destinations = {"cout"}
//		PSet cout = { 
//		PSet default = { int32 limit = 0 }
//	  }
	}
        service = RandomNumberGeneratorService
        {
        untracked uint32 sourceSeed = 135799753
        PSet moduleSeeds =
               {
		untracked uint32 VtxSmeared = 123456789
		untracked uint32 g4SimHits = 9784
                }
        }

	include "SimGeneral/HepPDTESSource/data/pdt.cfi"
	untracked PSet maxEvents = {untracked int32 input = 10}
    	source = FlatRandomEGunSource 
	{ 
		untracked PSet PGunParameters = 
		{
			untracked vint32 PartID = {11} 
			untracked double MinEta = 5.2
			untracked double MaxEta = 6.6
			untracked double MinPhi = 0.000
			untracked double MaxPhi = 6.28
			untracked double MinE   = 49.99
			untracked double MaxE   = 50.01
		}
		untracked int32 Verbosity = 0	
	}

	PSet CaloSD = {
                     double EminTrack = 1.0
                     int32  CheckHits = 25
                     bool   UseMap = true
                     int32  Verbosity = 0
                     bool   DetailedTiming = false
	}
        # Vtx Smearing
        include "IOMC/EventVertexGenerators/data/VtxSmearedGauss.cfi"

 	#Geometry
        include "SimG4CMS/Forward/test/data/castorGeometryXML.cfi"

	#Magnetic Field
        #include "MagneticField/Engine/data/volumeBasedMagneticField.cfi"

        module o1 = PoolOutputModule {untracked string fileName ="simevent.root"}

        include "SimG4Core/Application/data/g4SimHits.cfi"
	replace g4SimHits.UseMagneticField = false
	replace g4SimHits.Physics.DefaultCutValue = 10.
	replace g4SimHits.Generator.MinEtaCut = -7.0
	replace g4SimHits.Generator.MaxEtaCut =  7.0
	replace g4SimHits.CaloTrkProcessing.TestBeam = true
	replace g4SimHits.Watchers = {
			{string type            = "CastorTestAnalysis"
	 		PSet CastorTestAnalysis = {
				int32 Verbosity     = 0
				int32 StepNtupleFlag =0 
				int32 EventNtupleFlag = 1
	        	        string StepNtupleFileName =  "stepNtuple.root"
				string EventNtupleFileName = "eventNtuple.root"
		   	}
               }
	}

	path p1 = { VtxSmeared, g4SimHits }
        endpath outpath = { o1 }	
}		
